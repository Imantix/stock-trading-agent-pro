# Reports Directory

This directory contains all backtest reports and analysis generated by the trading agent.

## Directory Structure

```
reports/
├── BACKTEST_COMPARISON.md          # Cross-index, cross-timeframe comparison
├── yfinance/
│   └── sp500/
│       ├── backtest_report_channel_breakout_daily.md
│       ├── backtest_report_channel_breakout_5m.md
│       └── portfolio_backtest_report.md
└── upstox/
    └── bse30/
        └── backtest_report_channel_breakout_daily.md
```

## Report Types

### Per-Symbol Backtest Reports
- **File Pattern:** `backtest_report_{strategy}_{timeframe}.md`
- **Location:** `reports/{provider}/{index}/`
- **Description:** Individual stock performance with 1 share per trade (for analysis purposes)
- **Contains:**
  - Overall performance metrics (total trades, win rate, P&L)
  - Top/bottom performers by symbol
  - Strategy description and parameters

### Portfolio Backtest Reports
- **File Pattern:** `portfolio_backtest_report.md`
- **Location:** `reports/{provider}/{index}/`
- **Description:** Realistic portfolio simulation with capital allocation
- **Contains:**
  - Portfolio-level metrics (CAGR, Sharpe Ratio, Max Drawdown)
  - Capital allocation with position sizing (250 units per trade)
  - Max concurrent positions (18 pyramiding)
  - Day-by-day portfolio value tracking
  - Best/worst performing companies by total P&L

### Comparison Reports
- **File:** `BACKTEST_COMPARISON.md`
- **Location:** `reports/`
- **Description:** Comprehensive comparison across multiple configurations
- **Contains:**
  - Performance comparison matrix
  - Index analysis (S&P 500 vs BSE-30)
  - Timeframe analysis (daily vs intraday)
  - Provider comparison (YFinance vs Upstox)
  - Recommendations and next steps

## Data Files

Raw data (prices, summaries, trade logs) are stored separately in the `data/` directory:
- **Price data:** `data/{provider}/{index}/{index}_{timeframe}_prices.csv`
- **Summary CSVs:** `data/{provider}/{index}/{index}_summary_{strategy}_{timeframe}.csv`
- **Portfolio history:** `data/{provider}/{index}/portfolio_history.csv`
- **Trade logs:** `data/{provider}/{index}/portfolio_trade_log.csv`

## Running Reports

### Per-Symbol Backtest
```bash
python agent.py --index sp500 --strategy channel_breakout --timeframe daily --backtest
```

### Portfolio Backtest
```bash
python run_portfolio_backtest.py
```

All reports are automatically generated in the appropriate location based on the configuration.
